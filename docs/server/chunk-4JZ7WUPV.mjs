import './polyfills.server.mjs';
import{a as K,b as Q,c as X}from"./chunk-ZEUKB6TS.mjs";import{a as Z,c as ee,g as te,k as ie}from"./chunk-57D33C45.mjs";import{a as G}from"./chunk-EN2ALPUZ.mjs";import{a as q}from"./chunk-LZSFNBKD.mjs";import{a as J}from"./chunk-7A7I7V62.mjs";import{a as re}from"./chunk-J6HO2PGH.mjs";import"./chunk-GTSSCL6B.mjs";import{a as U}from"./chunk-NQXJSNXQ.mjs";import{l as z}from"./chunk-G74HGCX7.mjs";import{j as Y,k as N,p as R,q as $}from"./chunk-2JSQ6YWT.mjs";import{Cb as H,Db as p,Eb as g,Hb as A,Ib as D,Jb as M,Ka as v,Lb as B,Mb as V,Nb as E,Pa as s,Qa as W,Sb as h,Ua as L,Ub as x,Vb as j,X as u,_ as k,ba as F,bb as _,db as c,ha as f,hb as S,ia as C,ib as T,jb as y,kb as w,lb as a,mb as l,nb as d,ob as I,pb as O,qb as P,ub as b,vb as m}from"./chunk-NINXSNKP.mjs";import"./chunk-5XUXGTUW.mjs";var ne=(()=>{let n=class n{transform(t,r){return t.filter(o=>o.title.toLowerCase().includes(r.toLowerCase()))}};n.\u0275fac=function(r){return new(r||n)},n.\u0275pipe=F({name:"searchProducts",type:n,pure:!0,standalone:!0});let e=n;return e})();var ae=e=>["/product-details",e],le=()=>[1,2,3,4,5],ce=e=>({"rating-color":e});function me(e,n){e&1&&d(0,"img",10)}function de(e,n){e&1&&d(0,"img",11)}function pe(e,n){e&1&&d(0,"img",12)}function ue(e,n){if(e&1&&d(0,"img",14),e&2){let i=m().$implicit;c("src",i.image,v)("alt",i.name)("title",i.name)}}function _e(e,n){e&1&&(I(0),_(1,ue,1,3,"ng-template",5),O())}function ge(e,n){if(e&1&&(a(0,"section",9)(1,"h2"),p(2,"Popular Categories"),l(),a(3,"owl-carousel-o",4),_(4,_e,2,0,"ng-container",13),l()()),e&2){let i=m();s(3),c("options",i.categoriesSlidersOptions),s(),c("ngForOf",i.categories)}}function he(e,n){if(e&1&&d(0,"i",27),e&2){let i=n.$implicit,t=m().$implicit;c("ngClass",E(1,ce,i<=t.ratingsAverage))}}function fe(e,n){if(e&1){let i=P();a(0,"div",17)(1,"div",18)(2,"i",19),b("click",function(){let r=f(i).$implicit,o=m(2);return C(o.addToWishlist(r._id))}),l(),a(3,"header",20),d(4,"img",21),a(5,"h3",22),p(6),h(7,"cutText"),l(),a(8,"h4",23),p(9),l(),a(10,"div",24)(11,"span",25),p(12),h(13,"currency"),l(),a(14,"p",26),y(15,he,1,3,"i",27,T),a(17,"span",28),p(18),l()()()(),a(19,"footer")(20,"button",29,0),b("click",function(){let r=f(i).$implicit,o=H(21),oe=m(2);return C(oe.addToCart(r._id,o))}),p(22," +Add To Cart "),l()()()()}if(e&2){let i=n.$implicit,t=m(2);s(2),c("ngClass",t.idsOfProductsYouLikedThem.includes(i._id)?"fa-solid":"fa-regular"),s(),c("routerLink",E(15,ae,i._id)),s(),c("src",i.imageCover,v)("alt",i.title)("title",i.title),s(2),g(x(7,9,i.title,3)),s(3),g(i.category.name),s(3),g(x(13,12,i.price," EGP ")),s(3),w(V(17,le)),s(3),g(i.ratingsAverage)}}function Ce(e,n){if(e&1){let i=P();a(0,"section",9)(1,"h2"),p(2,"Popular Products"),l(),a(3,"input",15),M("ngModelChange",function(r){f(i);let o=m();return D(o.searchText,r)||(o.searchText=r),C(r)}),l(),a(4,"div",16),y(5,fe,23,18,"div",17,T),h(7,"searchProducts"),h(8,"slice"),l()()}if(e&2){let i=m();s(3),A("ngModel",i.searchText),s(2),w(j(8,4,x(7,1,i.products,i.searchText),0,18))}}var He=(()=>{let n=class n{constructor(t){this.toastr=t,this._ProductsService=u(q),this._CartService=u(U),this._WishlistService=u(G),this._Renderer2=u(L),this.products=[],this.categories=[],this.searchText="",this.idsOfProductsYouLikedThem=[],this.categoriesSlidersOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,autoplay:!0,autoplayTimeout:7e3,autoplaySpeed:1e3,dots:!0,navSpeed:700,navText:["",""],responsive:{0:{items:2},400:{items:3},740:{items:4},940:{items:6}},nav:!1},this.mainSlidersOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!0,autoplay:!0,autoplayTimeout:5e3,autoplaySpeed:1e3,navSpeed:700,navText:["",""],items:1,nav:!1}}ngOnInit(){this.getAllProducts(),this.getAllCategories(),this.getWishlistItems()}getAllProducts(){this._ProductsService.getProducts().subscribe({next:t=>{this.products=t.data},error:t=>{console.error("Error:",t)}})}getAllCategories(){this._ProductsService.getCategories().subscribe({next:t=>{this.categories=t.data},error:t=>{console.error("Error:",t)}})}addToCart(t,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.addToCart(t).subscribe({next:o=>{this.toastr.success(o.message),this._Renderer2.removeAttribute(r,"disabled"),this._CartService.cartItemsLength.next(o.numOfCartItems)},error:o=>{this._Renderer2.removeAttribute(r,"disabled"),console.error("Error:",o)}})}addToWishlist(t){this._WishlistService.addToWishlist(t).subscribe({next:r=>{this.toastr.success(r.message),this.idsOfProductsYouLikedThem=r.data,this._WishlistService.wishlistLength.next(this.idsOfProductsYouLikedThem.length)},error:r=>{console.error("Error:",r)}})}getWishlistItems(){this._WishlistService.getWishlistItems().subscribe({next:t=>{this.idsOfProductsYouLikedThem=t.data.map(r=>r._id),this._WishlistService.wishlistLength.next(t.count)}})}};n.\u0275fac=function(r){return new(r||n)(W(re))},n.\u0275cmp=k({type:n,selectors:[["app-home"]],standalone:!0,features:[B],decls:12,vars:3,consts:[["addBtn",""],[1,"py-3"],[1,"row","g-0"],[1,"col-md-9"],[3,"options"],["carouselSlide",""],[1,"col-md-3"],["height","200","src","slide-1.jpeg","alt","slider",1,"w-100"],["height","200","src","slide-2.jpeg","alt","slider",1,"w-100"],[1,"py-4"],["height","400","src","main-slider-1.jpeg","alt","slider"],["height","400","src","main-slider-2.jpeg","alt","slider"],["height","400","src","main-slider-3.jpeg","alt","slider"],[4,"ngFor","ngForOf"],["height","300",3,"src","alt","title"],["type","text","placeholder","Search.....",1,"form-control","w-50","mx-auto","my-3",3,"ngModelChange","ngModel"],[1,"row","g-4"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","h-100"],[1,"fa-heart","fs-3","heart-icon",3,"click","ngClass"],["role","button",3,"routerLink"],[1,"w-100",3,"src","alt","title"],[1,"h6"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between"],[1,"small"],[1,"mb-0"],[1,"fas","fa-star",3,"ngClass"],[1,"text-muted","ms-1"],[1,"main-btn","w-100","py-2",3,"click"]],template:function(r,o){r&1&&(a(0,"section",1)(1,"div",2)(2,"div",3)(3,"owl-carousel-o",4),_(4,me,1,0,"ng-template",5)(5,de,1,0,"ng-template",5)(6,pe,1,0,"ng-template",5),l()(),a(7,"div",6),d(8,"img",7)(9,"img",8),l()()(),_(10,ge,5,2,"section",9)(11,Ce,9,8,"section",9)),r&2&&(s(3),c("options",o.mainSlidersOptions),s(7),S(o.categories.length?10:-1),s(),S(o.products.length?11:-1))},dependencies:[$,J,R,X,Q,K,N,z,ie,Z,ee,te,ne,Y]});let e=n;return e})();export{He as HomeComponent};
