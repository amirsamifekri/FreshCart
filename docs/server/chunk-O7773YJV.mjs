import './polyfills.server.mjs';
import{a as P}from"./chunk-DXYZTJ7R.mjs";import{a as N,b as u,c as T,d as A,e as R,f as x,h as k,i as q,j as D,l as G}from"./chunk-57D33C45.mjs";import{k as b,l as I}from"./chunk-G74HGCX7.mjs";import{l as y,u as S}from"./chunk-2JSQ6YWT.mjs";import{Db as l,Eb as E,Lb as L,Pa as r,X as c,_ as C,bb as d,db as s,hb as _,lb as i,mb as t,nb as h,ta as w,ub as F,vb as v}from"./chunk-NINXSNKP.mjs";import"./chunk-5XUXGTUW.mjs";function M(e,n){e&1&&(i(0,"p",15),l(1," Email is required "),t())}function O(e,n){e&1&&(i(0,"p",15),l(1," Pattern is wrong "),t())}function V(e,n){if(e&1&&(i(0,"div",6),d(1,M,2,0,"p",14)(2,O,2,0,"p",14),t()),e&2){let p,o,a=v();r(),s("ngIf",(p=a.loginForm.get("email"))==null?null:p.getError("required")),r(),s("ngIf",(o=a.loginForm.get("email"))==null?null:o.getError("email"))}}function j(e,n){e&1&&(i(0,"p",15),l(1," password is required "),t())}function J(e,n){e&1&&(i(0,"p",15),l(1," must be six characters at least "),t())}function B(e,n){if(e&1&&(i(0,"div",6),d(1,j,2,0,"p",14)(2,J,2,0,"p",14),t()),e&2){let p,o,a=v();r(),s("ngIf",(p=a.loginForm.get("password"))==null?null:p.getError("required")),r(),s("ngIf",(o=a.loginForm.get("password"))==null?null:o.getError("pattern"))}}function U(e,n){e&1&&(i(0,"span"),l(1,"\xA0 "),h(2,"i",16),t())}function $(e,n){if(e&1&&(i(0,"h3",13),l(1),t()),e&2){let p=v();r(),E(p.message)}}var ee=(()=>{let n=class n{constructor(){this._AuthService=c(P),this._Router=c(b),this.platformId=c(w),this.message="",this.isLoading=!1,this.loginForm=new R({email:new x("",[u.required,u.email]),password:new x("",[u.required,u.pattern(/^[\w@]{6,}$/)])})}ngOnInit(){S(this.platformId)&&localStorage.getItem("token")&&this._Router.navigate(["/home"])}handleForm(){this.loginForm.valid&&(this.isLoading=!0,this._AuthService.login(this.loginForm.value).subscribe({next:o=>{this.isLoading=!1,S(this.platformId)&&(localStorage.setItem("token",JSON.stringify(o.token)),this._AuthService.getUserInfo(JSON.stringify(o.token))),this._Router.navigate(["/home"])},error:o=>{this.isLoading=!1,this.message=o.error.message}}))}};n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=C({type:n,selectors:[["app-login"]],standalone:!0,features:[L],decls:22,vars:6,consts:[[1,"w-75","mx-auto","rounded","shadow","p-4","my-3","bg-main-light"],[1,"my-3"],[3,"ngSubmit","formGroup"],[1,"form-item"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],[1,"alert","alert-danger","p-2"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],[1,"main-btn","mt-2",3,"disabled"],[4,"ngIf"],["role","button","routerLink","/forgot-password-auth",1,"text-decoration-none"],[1,"h6","my-3","alert","alert-info"],["class","mb-0",4,"ngIf"],[1,"mb-0"],[1,"fa-solid","fa-spin","fa-spinner"]],template:function(a,m){if(a&1&&(i(0,"section",0)(1,"h1",1),l(2,"Login Now"),t(),i(3,"form",2),F("ngSubmit",function(){return m.handleForm()}),i(4,"div",3)(5,"label",4),l(6,"Email"),t(),h(7,"input",5),d(8,V,3,2,"div",6),t(),i(9,"div",3)(10,"label",7),l(11,"Password"),t(),h(12,"input",8),d(13,B,3,2,"div",6),t(),i(14,"div",9)(15,"button",10)(16,"span"),l(17,"Login"),t(),d(18,U,3,0,"span",11),t(),i(19,"a",12),l(20,"Forgot Password"),t()()(),d(21,$,2,1,"h3",13),t()),a&2){let g,f;r(3),s("formGroup",m.loginForm),r(5),_((g=m.loginForm.get("email"))!=null&&g.errors&&((g=m.loginForm.get("email"))!=null&&g.touched)?8:-1),r(5),_((f=m.loginForm.get("password"))!=null&&f.errors&&((f=m.loginForm.get("password"))!=null&&f.touched)?13:-1),r(2),s("disabled",m.loginForm.invalid),r(3),s("ngIf",m.isLoading),r(3),_(m.message?21:-1)}},dependencies:[G,k,N,T,A,q,D,y,I]});let e=n;return e})();export{ee as LoginComponent};
