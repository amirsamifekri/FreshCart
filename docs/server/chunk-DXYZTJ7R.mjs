import './polyfills.server.mjs';
import{z as p}from"./chunk-2JSQ6YWT.mjs";import{R as a,W as c}from"./chunk-NINXSNKP.mjs";var i=class extends Error{};i.prototype.name="InvalidTokenError";function l(r){return decodeURIComponent(atob(r).replace(/(.)/g,(t,o)=>{let e=o.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e}))}function f(r){let t=r.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return l(t)}catch{return atob(t)}}function d(r,t){if(typeof r!="string")throw new i("Invalid token specified: must be a string");t||(t={});let o=t.header===!0?0:1,e=r.split(".")[o];if(typeof e!="string")throw new i(`Invalid token specified: missing part #${o+1}`);let n;try{n=f(e)}catch(s){throw new i(`Invalid token specified: invalid base64 for part #${o+1} (${s.message})`)}try{return JSON.parse(n)}catch(s){throw new i(`Invalid token specified: invalid json for part #${o+1} (${s.message})`)}}var b=(()=>{let t=class t{getUserInfo(e){if(e){let n=d(e);this.userInfo=n}}constructor(e){this._HttpClient=e,this.baseUrl="https://ecommerce.routemisr.com/api/v1/auth",this.userInfo=""}register(e){return this._HttpClient.post(`${this.baseUrl}/signup`,e)}login(e){return this._HttpClient.post(`${this.baseUrl}/signin`,e)}};t.\u0275fac=function(n){return new(n||t)(c(p))},t.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();export{b as a};
