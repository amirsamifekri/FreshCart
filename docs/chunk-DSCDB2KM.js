import{a as O}from"./chunk-XAWAVCWD.js";import{a as q,b as g,c as N,d as L,e as A,f,h as M,i as D,j as G,l as V}from"./chunk-WGGCTPZ6.js";import{g as P}from"./chunk-2NUI7P3E.js";import{j as I,r as T}from"./chunk-XJYRAHVJ.js";import{$ as w,Eb as m,Fb as y,Mb as b,Qa as l,ba as F,cb as d,eb as p,ib as u,mb as i,nb as t,ob as _,vb as R,wa as S,wb as c}from"./chunk-VJU5KXBJ.js";function $(e,n){e&1&&(i(0,"p",19),m(1," Name is required "),t())}function j(e,n){e&1&&(i(0,"p",19),m(1," Min length must be 3 "),t())}function k(e,n){e&1&&(i(0,"p",19),m(1," Max length must be 20 "),t())}function B(e,n){if(e&1&&(i(0,"div",6),d(1,$,2,0,"p",18)(2,j,2,0,"p",18)(3,k,2,0,"p",18),t()),e&2){let s,o,a,r=c();l(),p("ngIf",(s=r.registerForm.get("name"))==null?null:s.getError("required")),l(),p("ngIf",(o=r.registerForm.get("name"))==null?null:o.getError("minlength")),l(),p("ngIf",(a=r.registerForm.get("name"))==null?null:a.getError("maxlength"))}}function z(e,n){e&1&&(i(0,"p",19),m(1," Email is required "),t())}function H(e,n){e&1&&(i(0,"p",19),m(1," Pattern is wrong "),t())}function J(e,n){if(e&1&&(i(0,"div",6),d(1,z,2,0,"p",18)(2,H,2,0,"p",18),t()),e&2){let s,o,a=c();l(),p("ngIf",(s=a.registerForm.get("email"))==null?null:s.getError("required")),l(),p("ngIf",(o=a.registerForm.get("email"))==null?null:o.getError("email"))}}function K(e,n){e&1&&(i(0,"p",19),m(1," password is required "),t())}function Q(e,n){e&1&&(i(0,"p",19),m(1," must be six characters at least "),t())}function U(e,n){if(e&1&&(i(0,"div",6),d(1,K,2,0,"p",18)(2,Q,2,0,"p",18),t()),e&2){let s,o,a=c();l(),p("ngIf",(s=a.registerForm.get("password"))==null?null:s.getError("required")),l(),p("ngIf",(o=a.registerForm.get("password"))==null?null:o.getError("pattern"))}}function W(e,n){e&1&&(i(0,"p",19),m(1," rePassword is required "),t())}function X(e,n){e&1&&(i(0,"p",19),m(1," repassword does not mis match "),t())}function Y(e,n){if(e&1&&(i(0,"div",6),d(1,W,2,0,"p",18)(2,X,2,0,"p",18),t()),e&2){let s,o,a=c();l(),p("ngIf",(s=a.registerForm.get("rePassword"))==null?null:s.getError("required")),l(),p("ngIf",(o=a.registerForm.get("rePassword"))==null?null:o.getError("mismatch"))}}function Z(e,n){e&1&&(i(0,"p",19),m(1," phone is required "),t())}function ee(e,n){e&1&&(i(0,"p",19),m(1," phone must be 11 digits "),t())}function te(e,n){if(e&1&&(i(0,"div",6),d(1,Z,2,0,"p",18)(2,ee,2,0,"p",18),t()),e&2){let s,o,a=c();l(),p("ngIf",(s=a.registerForm.get("phone"))==null?null:s.getError("required")),l(),p("ngIf",(o=a.registerForm.get("phone"))==null?null:o.getError("pattern"))}}function ie(e,n){e&1&&(i(0,"span"),m(1,"\xA0 "),_(2,"i",20),t())}function ne(e,n){if(e&1&&(i(0,"h3",17),m(1),t()),e&2){let s=c();l(),y(s.message)}}var ge=(()=>{let n=class n{constructor(){this._AuthService=w(O),this._Router=w(P),this.message="",this.isLoading=!1,this.platformId=w(S),this.registerForm=new A({name:new f("",[g.required,g.minLength(3),g.maxLength(20)]),email:new f("",[g.required,g.email]),password:new f("",[g.required,g.pattern(/^[\w@]{6,}$/)]),rePassword:new f(""),phone:new f("",[g.required,g.pattern(/^(02)?01[0125]\d{8}$/)])},{validators:[this.confirmPassword]})}ngOnInit(){T(this.platformId)&&localStorage.getItem("token")&&this._Router.navigate(["/home"])}confirmPassword(o){let a=o.get("password"),r=o.get("rePassword");r?.value===""?r.setErrors({required:!0}):a?.value!==r?.value&&r?.setErrors({mismatch:!0})}handleForm(){this.registerForm.valid&&(this.isLoading=!0,this._AuthService.register(this.registerForm.value).subscribe({next:o=>{this.isLoading=!1,this._Router.navigate(["/login"])},error:o=>{this.isLoading=!1,this.message=o.error.message}}))}};n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=F({type:n,selectors:[["app-register"]],standalone:!0,features:[b],decls:34,vars:9,consts:[[1,"w-75","mx-auto","rounded","shadow","p-4","my-3","bg-main-light"],[1,"my-3"],[3,"ngSubmit","formGroup"],[1,"form-item"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"alert","alert-danger","p-2"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["for","rePassword"],["type","password","id","rePassword","formControlName","rePassword",1,"form-control"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control"],[1,"main-btn","mt-2",3,"disabled"],[4,"ngIf"],[1,"h6","my-3","alert","alert-info"],["class","mb-0",4,"ngIf"],[1,"mb-0"],[1,"fa-solid","fa-spin","fa-spinner"]],template:function(a,r){if(a&1&&(i(0,"section",0)(1,"h1",1),m(2,"Register Now"),t(),i(3,"form",2),R("ngSubmit",function(){return r.handleForm()}),i(4,"div",3)(5,"label",4),m(6,"Name"),t(),_(7,"input",5),d(8,B,4,3,"div",6),t(),i(9,"div",3)(10,"label",7),m(11,"Email"),t(),_(12,"input",8),d(13,J,3,2,"div",6),t(),i(14,"div",3)(15,"label",9),m(16,"Password"),t(),_(17,"input",10),d(18,U,3,2,"div",6),t(),i(19,"div",3)(20,"label",11),m(21,"RePassword"),t(),_(22,"input",12),d(23,Y,3,2,"div",6),t(),i(24,"div",3)(25,"label",13),m(26,"Phone"),t(),_(27,"input",14),d(28,te,3,2,"div",6),t(),i(29,"button",15)(30,"span"),m(31,"Register"),t(),d(32,ie,3,0,"span",16),t()(),d(33,ne,2,1,"h3",17),t()),a&2){let h,v,C,x,E;l(3),p("formGroup",r.registerForm),l(5),u((h=r.registerForm.get("name"))!=null&&h.errors&&((h=r.registerForm.get("name"))!=null&&h.touched)?8:-1),l(5),u((v=r.registerForm.get("email"))!=null&&v.errors&&((v=r.registerForm.get("email"))!=null&&v.touched)?13:-1),l(5),u((C=r.registerForm.get("password"))!=null&&C.errors&&((C=r.registerForm.get("password"))!=null&&C.touched)?18:-1),l(5),u((x=r.registerForm.get("rePassword"))!=null&&x.errors&&((x=r.registerForm.get("rePassword"))!=null&&x.touched)?23:-1),l(5),u((E=r.registerForm.get("phone"))!=null&&E.errors&&((E=r.registerForm.get("phone"))!=null&&E.touched)?28:-1),l(),p("disabled",r.registerForm.invalid),l(3),p("ngIf",r.isLoading),l(),u(r.message?33:-1)}},dependencies:[V,M,q,N,L,D,G,I]});let e=n;return e})();export{ge as RegisterComponent};
